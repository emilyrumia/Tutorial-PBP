{% extends 'base.html' %}

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
    $(document).ready(function(){
        $.getJSON("initial_wishlist_data.json", function(data) {
  
          for (i=0;i<data.length;i++){
  
            $(".barang").append(`<tr><td>${data[i].fields.nama_barang}</td><td>${data[i].fields.harga_barang}</td><td>${data[i].fields.deskripsi}</td></tr>`)
        
          }
  
        });
  
        $("#btn-submit").click(function(){
            $.post("http://localhost:8000/wishlist/ajax/submit", {nama_barang: $("#nama_barang").val(),harga_barang:parseInt($("#harga_barang").val()),deskripsi:$("#deskripsi").val()} )
        })
    });
    </script>
</head>


{% block content %}
<nav class="navbar navbar-expand-lg bg-light">
    <div class="container-fluid">
      <h5 class="text-success" class="navbar-brand">Welcome {{nama}}!</h5>
        <button class="btn btn-outline-success" type="submit"><a href="{% url 'wishlist:logout' %}"><h6 class="text-success">Logout</h6></a></button>
      </div>
    </div>
  </nav>

  <form method="POST" action="">
    {% csrf_token %}
    <table>
      <tr>
        <td>Nama Barang:</td>
        <td>
          <input
            type="text"
            name="nama_barang"
            placeholder="Nama Barang"
            id="nama_barang"
            class="form"
          />
        </td>
      </tr>
  
      <tr>
        <td>Harga Barang:</td>
        <td>
          <input
            type="text"
            name="harga_barang"
            id="harga_barang"
            placeholder="Harga Barang"
            class="form"
          />
        </td>
      </tr>
      <tr>
        <td>Deskripsi:</td>
        <td>
          <input
            type="text"
            name="deskripsi"
            placeholder="Deskripsi"
            class="form"
            id="deskripsi"
          />
        </td>
      </tr>
  
      <tr>
        <td></td>
      <td>  <button id="btn-submit">Tambah Barang</button></td></tr>
    </table>
  </form>

  <table class="table table-bordered" id = "myTable">
    <thead>
      <tr>
        <th scope="col" class="table-success" width = 20%>Nama Barang</th>
        <th scope="col" class="table-success" width = 20%>Harga Barang</th>
        <th scope="col" class="table-success" width = 60%>Deskripsi</th>
      </tr>
    </thead>
    <tbody>

    {% comment %} Tambahkan data di bawah baris ini {% endcomment %}
    {% for barang in list_barang %}
        <tr>
            <th>{{barang.nama_barang}}</th>
            <th>{{barang.harga_barang}}</th>
            <th>{{barang.deskripsi}}</th>
        </tr>
    {% endfor %}
    </tbody>
  </table>

<h6>Sesi terakhir login: {{ last_login }}</h6>

{% endblock content %}